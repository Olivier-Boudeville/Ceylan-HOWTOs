<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />
<title>Ceylan-HOWTOs: About Data Management</title>
<link rel="stylesheet" href="pygments-default.css" type="text/css" />
<link rel="stylesheet" href="howtos.css" type="text/css" />
<link href="howtos-icon.png" rel="icon">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>
<div class="document" id="data-management">
<span id="top"></span>
<h1 class="title">Data Management</h1>

<p><span class="raw-html"><a name="howtos_top"></a></span></p>
<p><span class="raw-html"><div class="banner"><p><em>Ceylan HOWTOs</em> <a href="http://howtos.esperide.org">browse latest</a> <a href="Ceylan-HOWTOs-english.pdf">get PDF</a> <a href="#howtos_top">go to top</a> <a href="#howtos_toc">go to toc</a> <a href="#howtos_bottom">go to bottom</a> <a href="Ceylan-HOWTOs-overview-english.html">go to HOWTOs</a> <a href="mailto:about(dash)ceylan-howtos(at)esperide(dot)com?subject=[Ceylan-HOWTOs]%20Remark%20about%20Data%20Management">email us</a></p></div></span></p>
<p><span class="raw-html"><center><img src="howtos-title.png" id="responsive-image-ultrasmall"></img></span></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Organisation:</th><td class="field-body">Copyright (C) 2022-2022 Olivier Boudeville</td>
</tr>
<tr class="field"><th class="field-name">Contact:</th><td class="field-body">about (dash) howtos (at) esperide (dot) com</td>
</tr>
<tr class="field"><th class="field-name">Creation date:</th><td class="field-body">Saturday, November 20, 2021</td>
</tr>
<tr class="field"><th class="field-name">Lastly updated:</th><td class="field-body">Saturday, May 14, 2022</td>
</tr>
</tbody>
</table>
<p><span class="raw-html"><a name="howtos_toc"></a></span></p>
<div class="contents local topic" id="topic-1">
<span id="table-of-contents"></span><p class="topic-title"><strong>Table of Contents</strong></p>
<ul class="simple">
<li><a class="reference internal" href="#overview" id="toc-entry-1">Overview</a></li>
<li><a class="reference internal" href="#general-purpose-data-format" id="toc-entry-2">General-Purpose Data Format</a><ul>
<li><a class="reference internal" href="#language-independent-data-formats" id="toc-entry-3">Language-Independent Data Formats</a></li>
<li><a class="reference internal" href="#erlang-friendly-data-format-etf" id="toc-entry-4">Erlang-Friendly Data Format: ETF</a></li>
</ul>
</li>
</ul>
</div>
<p><span class="raw-html"></center></span></p>
<div class="section" id="overview">
<h1><a class="toc-backref" href="#toc-entry-1">Overview</a></h1>
<p>This section concentrates information about <strong>data management</strong>, including data formats.</p>
</div>
<div class="section" id="general-purpose-data-format">
<h1><a class="toc-backref" href="#toc-entry-2">General-Purpose Data Format</a></h1>
<p>Such a format is typically useful to hold configuration information.</p>
<p>We prefer <a class="reference external" href="https://en.wikipedia.org/wiki/JSON">JSON</a> to, for example, <a class="reference external" href="https://en.wikipedia.org/wiki/YAML">YAML</a>, due to the Python-style indentation on which the latter relies in order to indicate nesting.</p>
<div class="section" id="language-independent-data-formats">
<h2><a class="toc-backref" href="#toc-entry-3">Language-Independent Data Formats</a></h2>
<div class="section" id="json-1">
<h3>JSON</h3>
<p>A JSON document is in plain-text and may contain:</p>
<ul class="simple">
<li>basic types:<ul>
<li>Number: <tt class="docutils literal">2</tt> or <tt class="docutils literal">4.1</tt></li>
<li>String: <tt class="docutils literal">&quot;I am a string&quot;</tt></li>
<li>Boolean: <tt class="docutils literal">true</tt> or <tt class="docutils literal">false</tt></li>
<li><tt class="docutils literal">null</tt>: to denote an empty value</li>
</ul>
</li>
<li>attribute-value pairs (ex: <tt class="docutils literal">&quot;firstName&quot;: &quot;John&quot;)</tt></li>
<li>&quot;arrays&quot; (ordered lists), ex: <tt class="docutils literal">&quot;myNumbers&quot;: [&quot;12&quot;, &quot;7&quot;, &quot;4&quot;]</tt></li>
<li>&quot;objects&quot; (collection of name-value pairs), ex:</li>
</ul>
<pre class="code json literal-block">
<span class="p">{</span><span class="w">

  </span><span class="nt">&quot;address&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
     </span><span class="nt">&quot;streetAddress&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;21 2nd Street&quot;</span><span class="p">,</span><span class="w">
     </span><span class="nt">&quot;city&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;New York&quot;</span><span class="w">
  </span><span class="p">}</span><span class="w">

</span><span class="p">}</span>
</pre>
<p>The order in arrays is expected to be preserved, but not the one of the elements in an object.</p>
<p>Defining an element (ex: an attribute-value pair) more than once is allowed, and the last instance thereof will be the one kept.</p>
<p>Ex:</p>
<pre class="code json literal-block">
<span class="p">{</span><span class="w">
 </span><span class="nt">&quot;tcp_port&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">8084</span><span class="p">,</span><span class="w">
 </span><span class="nt">&quot;tcp_port&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">8085</span><span class="p">,</span><span class="w">
 </span><span class="p">[</span><span class="err">...</span><span class="p">]</span><span class="w">
</span><span class="p">}</span>
</pre>
<p>Here, once the document is parsed, <tt class="docutils literal">tcp_port</tt> will be considered equal to <tt class="docutils literal">8085</tt>.</p>
<div class="section" id="pretty-printing">
<h4>Pretty-Printing</h4>
<p>On GNU/Linux, one may rely on <tt class="docutils literal">jq</tt>, a command-line JSON processor.</p>
<p>Ex: <tt class="docutils literal">jq . my_document.json</tt>.</p>
</div>
<div class="section" id="validating">
<h4>Validating</h4>
<p>One may consider that a given document is a legit JSON one iff <tt class="docutils literal">jq type</tt> reports a non-empty output.</p>
<p>Example:</p>
<pre class="code bash literal-block">
$ jq <span class="nb">type</span> my_document.json
<span class="s2">&quot;object&quot;</span>
</pre>
</div>
<div class="section" id="example">
<h4>Example</h4>
<p>Regarding syntax, a <a class="reference external" href="https://en.wikipedia.org/wiki/JSON#Syntax">typical JSON document</a> is:</p>
<pre class="code json literal-block">
<span class="p">{</span><span class="w">
  </span><span class="nt">&quot;firstName&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;John&quot;</span><span class="p">,</span><span class="w">
  </span><span class="nt">&quot;__comment&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;This is a comment!&quot;</span><span class="p">,</span><span class="w">
  </span><span class="nt">&quot;lastName&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Smith&quot;</span><span class="p">,</span><span class="w">
  </span><span class="nt">&quot;isAlive&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nt">&quot;age&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">27</span><span class="p">,</span><span class="w">
  </span><span class="nt">&quot;address&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">&quot;streetAddress&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;21 2nd Street&quot;</span><span class="p">,</span><span class="w">
    </span><span class="nt">&quot;city&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;New York&quot;</span><span class="p">,</span><span class="w">
    </span><span class="nt">&quot;state&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;NY&quot;</span><span class="p">,</span><span class="w">
    </span><span class="nt">&quot;postalCode&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;10021-3100&quot;</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">&quot;phoneNumbers&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;home&quot;</span><span class="p">,</span><span class="w">
      </span><span class="nt">&quot;number&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;212 555-1234&quot;</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;office&quot;</span><span class="p">,</span><span class="w">
      </span><span class="nt">&quot;number&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;646 555-4567&quot;</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nt">&quot;children&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
  </span><span class="nt">&quot;spouse&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
</span><span class="p">}</span>
</pre>
</div>
<div class="section" id="specifying-comments">
<h4>Specifying comments</h4>
<p>With JSON, there is, on purpose, no built-in way to add comments.</p>
<p>The sole solution/workaround is to add comments as specific fields, although they will end up as data like the other fields.</p>
<p>We recommend to mark them specifically (ex: as <tt class="docutils literal">__comment</tt>) so that they should not interfere with the &quot;real&quot; data. As an example, see the second key of the previous JSON document.</p>
</div>
</div>
<div class="section" id="yaml-1">
<h3>YAML</h3>
<p><a class="reference external" href="https://yaml.org/">YAML</a> is a data serialization language for all programming languages.</p>
<p>We prefer the <tt class="docutils literal">.yaml</tt> extension to the <tt class="docutils literal">.yml</tt> one.</p>
<p>No tabulation should be used for indentation, only spaces, and preferably a fixed amount of them; we used to prefer 4, now 2, since it allows to properly align the items listed with a dash (ex: &quot;<tt class="docutils literal">- I am an item</tt>&quot;).</p>
<p>With Emacs, the <a class="reference external" href="https://www.emacswiki.org/emacs/YamlMode">Yaml Mode</a> may be of help.</p>
</div>
</div>
<div class="section" id="erlang-friendly-data-format-etf">
<h2><a class="toc-backref" href="#toc-entry-4">Erlang-Friendly Data Format: ETF</a></h2>
<p>Such a format is typically useful to hold configuration information in an Erlang context.</p>
<p>We recommend the use of <a class="reference external" href="http://myriad.esperide.org/#etf">ETF</a> (the <em>Erlang Term Format</em>), that we find particularly useful and even more suitable than JSON (entry order preserved, comments supported, etc.).</p>
<p><span class="raw-html"><a name="howtos_bottom"></a></span></p>
</div>
</div>
</div>
</body>
</html>
