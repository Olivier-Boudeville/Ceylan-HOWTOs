<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Docutils 0.16: http://docutils.sourceforge.net/" />
<title>Ceylan-HOWTOs: About Build Tools</title>
<link rel="stylesheet" href="pygments-default.css" type="text/css" />
<link rel="stylesheet" href="howtos.css" type="text/css" />
<link href="howtos-icon.png" rel="icon">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>
<div class="document" id="about-build-tools">
<span id="top"></span>
<h1 class="title">About Build Tools</h1>

<p><span class="raw-html"><a name="howtos_top"></a></span></p>
<p><span class="raw-html"><div class="banner"><p><em>Ceylan HOWTOs</em> <a href="http://howtos.esperide.org">browse latest</a> <a href="Ceylan-HOWTOs-english.pdf">get PDF</a> <a href="#howtos_top">go to top</a> <a href="#howtos_toc">go to toc</a> <a href="#howtos_bottom">go to bottom</a> <a href="Ceylan-HOWTOs-overview-english.html">go to HOWTOs</a> <a href="mailto:about(dash)ceylan-howtos(at)esperide(dot)com?subject=[Ceylan-HOWTOs]%20Remark%20about%20Build">email us</a></p></div></span></p>
<p><span class="raw-html"><center><img src="howtos-title.png" id="responsive-image-ultrasmall"></img></span></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Organisation:</th><td class="field-body">Copyright (C) 2021-2021 Olivier Boudeville</td>
</tr>
<tr class="field"><th class="field-name">Contact:</th><td class="field-body">about (dash) howtos (at) esperide (dot) com</td>
</tr>
<tr class="field"><th class="field-name">Creation date:</th><td class="field-body">Saturday, November 20, 2021</td>
</tr>
<tr class="field"><th class="field-name">Lastly updated:</th><td class="field-body">Friday, December 17, 2021</td>
</tr>
</tbody>
</table>
<p><span class="raw-html"><a name="howtos_toc"></a></span></p>
<div class="contents local topic" id="id1">
<span id="table-of-contents"></span><p class="topic-title"><strong>Table of Contents</strong></p>
<ul class="simple">
<li><a class="reference internal" href="#purpose-of-build-tools" id="id5">Purpose of Build Tools</a></li>
<li><a class="reference internal" href="#choice" id="id6">Choice</a></li>
<li><a class="reference internal" href="#id3" id="id7">GNU make</a></li>
<li><a class="reference internal" href="#see-also" id="id8">See Also</a></li>
</ul>
</div>
<p><span class="raw-html"></center></span></p>
<div class="section" id="purpose-of-build-tools">
<h1><a class="toc-backref" href="#id5">Purpose of Build Tools</a></h1>
<p>A build tool allows to automate all kinds of tasks, by <strong>applying rules and tracking dependencies</strong>: not only compiling, linking, etc. applications, but also checking them, generating their documentation, running and debugging them, etc.</p>
</div>
<div class="section" id="choice">
<h1><a class="toc-backref" href="#id6">Choice</a></h1>
<p>Often build tools are tied to some programming languages (ex: Maven for Java, <a class="reference external" href="https://github.com/erlang/rebar3">Rebar3</a> for Erlang, etc.).</p>
<p>Some tools are more generic by nature, like late GNU autotools, or <a class="reference external" href="https://cmake.org/">Cmake</a>, <a class="reference external" href="https://www.gnu.org/software/make/">GNU make</a>, etc.</p>
<p>For most uses, our personal preference goes to the latter. Notably all our Erlang-based developments, starting from <a class="reference external" href="http://myriad.esperide.org">Ceylan-Myriad</a>, are based on GNU make.</p>
</div>
<div class="section" id="id3">
<span id="id2"></span><h1><a class="toc-backref" href="#id7">GNU make</a></h1>
<p>We recommend the reading of <a class="reference external" href="https://www.gnu.org/software/make/manual/make.html">this essential source</a> for reference purpose, notably the section about <a class="reference external" href="https://www.gnu.org/software/make/manual/make.html#Flavors">The Two Flavors of Variables</a>.</p>
<p>Taking our Erlang developments as an example, their base, first layer, <a class="reference external" href="http://myriad.esperide.org">Ceylan-Myriad</a>, relies on build facilities that are designed to be also reused and further adapted / specialised / parametrised in turn  by all layers above in the stack (ex: <a class="reference external" href="http://wooper.esperide.org">Ceylan-WOOPER</a>).</p>
<p>For that, Myriad defines three top-level makefiles:</p>
<ul class="simple">
<li>base build-related <em>variables</em> (settings) in <a class="reference external" href="https://github.com/Olivier-Boudeville/Ceylan-Myriad/blob/master/GNUmakevars.inc">GNUmakevars.inc</a>, providing defaults that can be overridden by upper layers</li>
<li><em>automatic rules</em>, in <a class="reference external" href="https://github.com/Olivier-Boudeville/Ceylan-Myriad/blob/master/GNUmakerules-automatic.inc">GNUmakerules-automatic.inc</a>, able to operate generically on patterns, typically based on file extensions</li>
<li><em>explicit rules</em>, in <a class="reference external" href="https://github.com/Olivier-Boudeville/Ceylan-Myriad/blob/master/GNUmakerules-explicit.inc">GNUmakerules-explicit.inc</a>, for all specific named make targets (ex: <tt class="docutils literal">all</tt>, <tt class="docutils literal">clean</tt>)</li>
</ul>
<p>Each layer references its specialisation of these three elements (and the ones of all layers below) in its own <a class="reference external" href="https://github.com/Olivier-Boudeville/Ceylan-Myriad/blob/master/GNUmakesettings.inc">GNUmakesettings.inc</a> file, which is the only element that each per-directory <tt class="docutils literal">GNUmakefile</tt> file will have to include.</p>
<p>Such a system allows defining (build-time and runtime) settings and rules once for all, while remaining flexible and enabling individual makefiles to be minimalistic: beside said include, they just have to list which of their subdirectories the build should traverse (thanks to the <tt class="docutils literal">MODULES_DIRS</tt> variable, see <a class="reference external" href="https://github.com/Olivier-Boudeville/Ceylan-Myriad/blob/master/src/user-interface/GNUmakefile">example</a>).</p>
<p><span class="raw-html"><a name="howtos_bottom"></a></span></p>
</div>
<div class="section" id="see-also">
<h1><a class="toc-backref" href="#id8">See Also</a></h1>
<p><a class="reference external" href="https://github.com/asdf-vm/asdf">asdf</a>, an extendable version manager for various languages (Ruby, Node.js, Elixir, Erlang, etc.).</p>
<p>One may refer to the <a class="reference external" href="http://hull.esperide.org#for-development">development section</a> of Ceylan-Hull, or go back to the <a class="reference external" href="Ceylan-HOWTOs-overview-english.html">Ceylan-HOWTOs main page</a>.</p>
</div>
</div>
</body>
</html>
